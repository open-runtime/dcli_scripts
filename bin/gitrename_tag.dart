#! /usr/bin/env dart
/* Copyright (C) S. Brett Sutton - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Brett Sutton <bsutton@onepub.dev>, Jan 2022
 */

import 'dart:io';

import 'package:dcli/dcli.dart';

/// dcli script generated by:
/// dcli create rename_tag.dart
///
/// See
/// https://pub.dev/packages/dcli#-installing-tab-
///
/// For details on installing dcli.
///

void main(List<String> args) {
  if (args.length != 2) {
    printerr('usage rename_tag <oldTag> <newTag>');
    exit(1);
  }
  final oldTag = args[0];
  final newTag = args[1];

  'git tag $newTag $oldTag'.run;
  'git tag -d $oldTag'.run;
  'git push origin :refs/tags/$oldTag'.run;
  'git push --tags'.run;
}
