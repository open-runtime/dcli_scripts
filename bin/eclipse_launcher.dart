#! /usr/bin/env dart
/* Copyright (C) S. Brett Sutton - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Brett Sutton <bsutton@onepub.dev>, Jan 2022
 */

import 'dart:io';

import 'package:dcli/dcli.dart';
import 'package:path/path.dart';

/// dcli script generated by:
/// dcli create ecliplse_launcher.dart
///
/// See
/// https://pub.dev/packages/dcli#-installing-tab-
///
/// For details on installing dcli.
///

/// eclipse_launcher.dart - create a desktop launcher for eclipse.
void main(List<String> args) {
  final installs = find('*',
      recursive: false,
      workingDirectory: join(HOME, 'apps', 'eclipse'),
      types: [FileSystemEntityType.directory]).toList();

  final install = menu('Select eclipse version to use: ', options: installs);

  final path = join(HOME, '.local', 'share', 'applications', 'eclipse.desktop');
  // create desktop.ini
  if (exists(path)) {
    delete(path);
  }

  path
    ..write('''
[Desktop Entry]
Version=1.0
Type=Application
Name=Eclipse
Comment=Jave IDE
Categories=Development;IDE;
Terminal=false''')
    ..append('Icon=${join(install, "icon.xpm")}')
    ..append('Exec=env GTK_THEME=Adwaita ${join(install, "eclipse")}');

  print('Created:');
  cat(path);
}
